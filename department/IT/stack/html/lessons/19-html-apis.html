<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 19: HTML APIs Overview | Malone Global University</title>
  <meta name="description" content="Lesson 19 â€” Overview of useful browser APIs: Geolocation, Drag-and-Drop, and Web Storage. Practical examples, permissions & security guidance, accessibility notes, and practice tasks." />
  <link rel="icon" href="/image/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/component/css/main.css" />
  </head>

<body>

    <header class="navbar" role="navigation" aria-label="Main Navigation">
    <div class="logo-container">
      <a href="/index"><img src="/image/logo.png" alt="Malone University Logo" class="logo-img"></a>
      <span class="school-name"> Malone University</span>
    </div>

    <ul class="nav-links" id="nav-links">
      <li><a href="/contact">Contact</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/community/resources">Community</a></li>
      <li><a href="/homepage">Home</a></li>
      <li><a href="/mission">Mission</a></li>
      <li><a href="/library/directory">Library</a></li>
      <li><a href="/department/directory">Department</a></li>
      <li><a href="/devblog/live-journal">DevBlog</a></li>
     
    </ul>

    <div style="display:flex;align-items:center;">
      <div class="nav-toggle" id="nav-toggle" aria-label="Toggle menu" role="button" tabindex="0">
        <span></span><span></span><span></span>
      </div>

      <button id="theme-toggle" title="Toggle theme" aria-pressed="false">ðŸ’»</button>

    </div>
  </header>

 <main class="container">
   <!-- put generated lessons here -->

   <article class="lesson lesson-19">
     <h1>Lesson 19 â€” HTML APIs Overview</h1>
     <p class="meta">Stage 3 â€” Advanced â†’ Lesson 19</p>

     <section>
       <h2>Overview</h2>
       <p>
         Modern browsers expose small, focused APIs that let web pages interact with device features and provide richer interactions without plugins.
         This lesson covers three frequently used and practical APIs:
         <strong>Geolocation</strong> (get the user's location with permission), <strong>Drag-and-Drop</strong> (native DnD interactions and data transfer), and
         <strong>Web Storage</strong> (<code>localStorage</code> &amp; <code>sessionStorage</code>, simple client-side persistence).
         For each API you'll get example code, accessibility and security guidance, and practice exercises.
       </p>
       <p>
         <em>Important:</em> Many of these APIs require a secure context (HTTPS or localhost) and user consent. Never assume availability â€” feature-detect and provide fallbacks.
       </p>
     </section>

     <section>
       <h2>Geolocation API</h2>
       <h3>What it does</h3>
       <p>
         The Geolocation API lets you request the device's approximate or precise geographic coordinates (latitude/longitude). Browsers ask the user for permission before sharing location. Use it only when location is necessary and explain why you need it.
       </p>

       <h3>Basic usage</h3>
<pre><code>// Check availability
if ('geolocation' in navigator) {
  navigator.geolocation.getCurrentPosition(
    (pos) =&gt; {
      const { latitude, longitude, accuracy } = pos.coords;
      console.log('lat', latitude, 'lon', longitude, 'accuracy(m)', accuracy);
    },
    (err) =&gt; {
      console.error('Geolocation error', err);
    },
    { enableHighAccuracy: false, timeout: 10000, maximumAge: 60000 }
  );
} else {
  // Fallback: ask the user to enter location manually
}
</code></pre>

       <h3>watchPosition vs getCurrentPosition</h3>
       <p>
         <code>getCurrentPosition</code> obtains a single reading (good for one-off location). <code>watchPosition</code> registers a callback that receives updates as the device location changes; it returns a watcher id you can clear with <code>navigator.geolocation.clearWatch(id)</code>.
       </p>

<pre><code>const id = navigator.geolocation.watchPosition(updateHandler, errorHandler, { enableHighAccuracy: true });
/* later */
navigator.geolocation.clearWatch(id);
</code></pre>

       <h3>Options</h3>
       <ul>
         <li><code>enableHighAccuracy</code>: try to use GPS (more battery &amp; slower),</li>
         <li><code>timeout</code>: max time to wait (ms),</li>
         <li><code>maximumAge</code>: accept cached positions younger than this (ms).</li>
       </ul>

       <h3>Privacy & security</h3>
       <ul>
         <li>Only request location over HTTPS (browsers block the API on insecure origins).</li>
         <li>Provide a clear reason and UI explaining how the location will be used.</li>
         <li>Avoid storing precise location permanently unless necessary; if you store it, treat it like sensitive data (encrypt server-side and follow privacy laws).</li>
         <li>Respect the user's choice to deny; provide a manual fallback input (e.g., city or zip code).</li>
       </ul>

       <h3>Error handling</h3>
<pre><code>function errorHandler(err) {
  switch (err.code) {
    case err.PERMISSION_DENIED: /* user denied */
      break;
    case err.POSITION_UNAVAILABLE: /* position unavailable */
      break;
    case err.TIMEOUT: /* request timed out */
      break;
    default: /* unknown error */ 
  }
}
</code></pre>

       <h3>Accessibility & UX</h3>
       <ul>
         <li>Request location in response to a user action (e.g., clicking "Use my location") rather than automatically on page load.</li>
         <li>Provide clear loading state and an ability to cancel watchers.</li>
         <li>Offer typed alternatives (search box) so keyboard/screen-reader users can enter locations without relying on device sensors.</li>
       </ul>
     </section>

     <section>
       <h2>Drag-and-Drop API</h2>
       <h3>What it does</h3>
       <p>
         The HTML Drag-and-Drop API enables native dragging interactions between elements and supports transferring arbitrary data (via <code>DataTransfer</code>). It is commonly used for reordering lists, dragging files into drop zones, and moving items between areas.
       </p>

       <h3>Key attributes & events</h3>
       <ul>
         <li><code>draggable="true"</code> â€” makes an element draggable.</li>
         <li>Events: <code>dragstart</code>, <code>drag</code>, <code>dragend</code>, <code>dragenter</code>, <code>dragover</code>, <code>dragleave</code>, <code>drop</code>.</li>
         <li><code>event.dataTransfer</code> â€” object to set/get transferred data, allowed effects, and drag images.</li>
       </ul>

       <h3>Simple example â€” dragging text between lists</h3>
<pre><code>// draggable item
item.addEventListener('dragstart', (e) =&gt; {
  e.dataTransfer.setData('text/plain', item.id);
  e.dataTransfer.effectAllowed = 'move';
});

// drop zone
zone.addEventListener('dragover', (e) =&gt; {
  e.preventDefault(); // allows drop
  e.dataTransfer.dropEffect = 'move';
});

zone.addEventListener('drop', (e) =&gt; {
  e.preventDefault();
  const id = e.dataTransfer.getData('text/plain');
  const dragged = document.getElementById(id);
  zone.appendChild(dragged); // or perform reordering
});
</code></pre>

       <h3>File drop (common pattern)</h3>
<pre><code>dropZone.addEventListener('drop', async (e) =&gt; {
  e.preventDefault();
  const files = Array.from(e.dataTransfer.files);
  for (const file of files) {
    // process file (validate type/size) and upload or preview
  }
});
</code></pre>

       <h3>Accessibility concerns</h3>
       <p>
         The native DnD API is mouse/touch friendly but not keyboard accessible by default. Provide keyboard alternatives for all drag interactions:
       </p>
       <ul>
         <li>Implement keyboard commands for picking up and placing items (e.g., Enter/Space to pick up, arrow keys to move, Enter to drop).</li>
         <li>Use ARIA live regions to announce the state when an item is picked up or moved.</li>
         <li>Provide visible focus styles and ensure draggable targets are focusable (<code>tabindex="0"</code> where necessary).</li>
         <li>For file drop zones, ensure there's also a file input fallback for keyboard-only users and assistive tech.</li>
       </ul>

       <h3>Security & validation</h3>
       <ul>
         <li>Validate files client-side for type and size, but always perform server-side validation before storing or processing.</li>
         <li>Do not trust <code>dataTransfer</code> contents â€” sanitize any text or file data before using it.</li>
       </ul>
     </section>

     <section>
       <h2>Web Storage (localStorage & sessionStorage)</h2>
       <h3>What it does</h3>
       <p>
         The Web Storage API gives you simple key/value storage in the browser. <code>localStorage</code> persists across sessions, while <code>sessionStorage</code> lasts only for the current tab/window. Both store strings and are synchronous.
       </p>

       <h3>Basic API</h3>
<pre><code>// set
localStorage.setItem('theme', 'dark');
// get
const theme = localStorage.getItem('theme');
// remove
localStorage.removeItem('theme');
// clear all
localStorage.clear();
</code></pre>

       <h3>Storing structured data</h3>
<pre><code>const user = { id: 42, name: 'Ada' };
localStorage.setItem('user', JSON.stringify(user));
const stored = JSON.parse(localStorage.getItem('user') || '{}');
</code></pre>

       <h3>sessionStorage vs localStorage</h3>
       <ul>
         <li><code>sessionStorage</code>: scoped to the top-level browsing context (tab). Cleared when the tab is closed.</li>
         <li><code>localStorage</code>: persisted across browser sessions for the same origin until explicitly cleared.</li>
       </ul>

       <h3>Storage events</h3>
       <p>
         When storage is changed in one tab, other tabs on the same origin receive a <code>storage</code> event (useful for syncing state).
       </p>

<pre><code>window.addEventListener('storage', e =&gt; {
  // e.key, e.newValue, e.oldValue, e.url
});
</code></pre>

       <h3>Limits, performance & quotas</h3>
       <ul>
         <li>Storage quotas vary by browser and device (typically several MBs). Don't assume unlimited space.</li>
         <li>Web Storage is synchronous â€” avoid heavy reads/writes on the critical path (can block the main thread).</li>
         <li>Use IndexedDB for large datasets or structured storage; it is asynchronous and designed for more complex needs.</li>
       </ul>

       <h3>Security considerations</h3>
       <ul>
         <li><strong>Never store sensitive secrets</strong> (passwords, auth tokens) in localStorage â€” it is accessible to JavaScript and vulnerable to XSS. Prefer HttpOnly cookies for session tokens and server-side protections.</li>
         <li>Sanitize data read from storage before injecting into the DOM to avoid XSS.</li>
         <li>Be mindful of privacy: localStorage persists until cleared; avoid storing personally identifiable information unless necessary and compliant with privacy laws.</li>
       </ul>

       <h3>Namespacing and expiry patterns</h3>
       <p>
         Use a consistent key prefix (e.g., <code>mgui:lesson19:notes</code>) to avoid collisions. Implement expiry by storing a timestamp with the data and checking it when reading.
       </p>

<pre><code>function setWithExpiry(key, value, ttlMs) {
  const record = { value, expires: Date.now() + ttlMs };
  localStorage.setItem(key, JSON.stringify(record));
}
function getWithExpiry(key) {
  const raw = localStorage.getItem(key);
  if (!raw) return null;
  const record = JSON.parse(raw);
  if (Date.now() &gt; record.expires) {
    localStorage.removeItem(key);
    return null;
  }
  return record.value;
}
</code></pre>
     </section>

     <section>
       <h2>Feature detection & progressive enhancement</h2>
       <p>
         Always check for API availability before using it. Provide a fallback UI when the API is unavailable or user denies permission.
       </p>

<pre><code>// Geolocation
if ('geolocation' in navigator) { /* use it */ } else { /* fallback */ }

// localStorage
try {
  localStorage.setItem('__test', '1');
  localStorage.removeItem('__test');
  // available
} catch (err) {
  // not available (e.g., private mode or quota issues)
}
</code></pre>
     </section>

     <section>
       <h2>Accessibility & UX summary for these APIs</h2>
       <ul>
         <li>Request permissions in response to deliberate user actions and explain why you need them.</li>
         <li>Provide keyboard and screen-reader accessible alternatives for any feature that otherwise requires device sensors or pointer interactions (e.g., manual address input instead of geolocation; keyboard reorder instead of drag-and-drop).</li>
         <li>Announce state changes (file dropped, location found, item moved) using visible messages and <code>aria-live</code> regions when appropriate.</li>
       </ul>
     </section>

     <section>
       <h2>Practice</h2>
       <ol>
         <li>Create <code>19-apis-practice.html</code> with three small hands-on demos:
           <ul>
             <li><strong>Geolocation demo:</strong> a "Use my location" button that gets the current position and shows coordinates and a reverse-geocoded city (use a placeholder for reverse-geocoding or instruct students to paste a mock address).</li>
             <li><strong>Drag-and-drop demo:</strong> a small list where items can be reordered with drag-and-drop and with keyboard controls (provide "move up / move down" buttons for keyboard users). Also include a file drop zone that accepts image files and shows previews.</li>
             <li><strong>Web Storage demo:</strong> a small notes box that saves content to localStorage with a timestamp expiry and demonstrates syncing across tabs using the <code>storage</code> event.</li>
           </ul>
         </li>

         <li>Test & validate:
           <ul>
             <li>Run each demo over HTTPS or localhost (Geolocation requires secure context).</li>
             <li>Try denying permission for geolocation to observe fallback behavior.</li>
             <li>Test drag-and-drop with mouse, touch, and keyboard alternatives.</li>
             <li>Open two tabs to confirm localStorage sync via <code>storage</code> events.</li>
           </ul>
         </li>

         <li>Security checks:
           <ul>
             <li>Ensure files dropped are validated by type/size before any client-side preview or upload.</li>
             <li>Avoid storing sensitive tokens in Web Storage; demonstrate safe patterns (e.g., ephemeral state only).</li>
           </ul>
         </li>
       </ol>
     </section>

     <section>
       <h2>Key Takeaways</h2>
       <ul>
         <li>APIs like Geolocation, Drag-and-Drop, and Web Storage enable richer experiences â€” but require explicit user permission (when applicable), secure contexts, and careful security/UX design.</li>
         <li>Always feature-detect and provide fallbacks. Never assume availability or permission.</li>
         <li>Protect users' privacy: request only necessary data, explain why you need it, and avoid persisting sensitive information client-side.</li>
         <li>Make interactions accessible: provide keyboard alternatives and ARIA announcements where the native API lacks keyboard or screen-reader support.</li>
         <li>For larger or persistent storage needs, consider IndexedDB (async) instead of Web Storage (synchronous and limited). For sensitive auth tokens, prefer secure, HttpOnly cookies with proper server-side handling.</li>
       </ul>
     </section>

     <section>
       <h2>Next Steps</h2>
       <p>
         Proceed to <a href="20-performance.html">Lesson 20 â€” Performance &amp; Optimization</a> to learn about script loading strategies, media lazy-loading, and other optimizations you can apply to API-driven pages and projects (Capstone: Portfolio Site follows).
       </p>
     </section>

   </article>

 </main>
  

  <footer>
    <p>Â© 2025 Malone University. Building the future, on our own terms.</p>
    <p>
      <a href="https://twitter.com/MaloneGlobal" target="_blank" rel="noopener noreferrer">Twitter</a> |
      <a href="https://facebook.com/YOUR_HANDLE" target="_blank" rel="noopener noreferrer">Facebook</a> |
      <a href="https://instagram.com/maloneglobaluniversity" target="_blank" rel="noopener noreferrer">Instagram</a> |
      <a href="/terms.html">Terms</a> |
      <a href="/contact.html">Contact</a>
    </p>


<p>Content updated: 8/20/2025<br>
   Layout updated: 8/20/2025</p>

  </footer>
   
<script src="/component/script/js/main.js"></script>
</body>
</html>

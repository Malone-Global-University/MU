<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Auto Math Formatter</title>
<style>
.math {
    font-family: "Times New Roman", serif;
    font-size: 18px;
    white-space: pre; /* preserve spacing */
}
.sup {
    vertical-align: super;
    font-size: 0.7em;
}
.frac {
    display: inline-block;
    vertical-align: middle;
    text-align: center;
}
.frac span {
    display: block;
    line-height: 1;
}
.frac .num {
    border-bottom: 1px solid black;
}
.frac .den {
    display: block;
}
</style>
</head>
<body>

<p class="math">5 - 3 = 2</p>
<p class="math">x - y = z</p>
<p class="math">a * b + c / d - e</p>
<p class="math">x^2 + y^2 = z^2</p>
<p class="math">(a+b)/(c+d)</p>
<p class="math">\alpha + \beta = \theta</p>

<script>
// Advanced Auto Math Formatter
document.addEventListener("DOMContentLoaded", function() {
    const greekMap = {
        "\\alpha": "α",
        "\\beta": "β",
        "\\gamma": "γ",
        "\\theta": "θ",
        "\\pi": "π",
        "\\lambda": "λ",
        "\\mu": "μ",
        "\\sigma": "σ"
    };

    const mathBlocks = document.querySelectorAll(".math");

    mathBlocks.forEach(block => {
        let html = block.innerHTML;

        // 1. Greek letters
        for (const key in greekMap) {
            const re = new RegExp(key, "g");
            html = html.replace(re, greekMap[key]);
        }

        // 2. Replace hyphen-minus with proper minus
        html = html.replace(/(^| )-($| )/g, " &minus; ");

        // 3. Replace * and / with proper symbols
        html = html.replace(/\*/g, " × ");

        // 4. Fractions: (a+b)/(c+d) -> inline fraction
        html = html.replace(/\(([^()]+)\)\/\(([^()]+)\)/g, function(match, num, den) {
            return `<span class="frac"><span class="num">${num}</span><span class="den">${den}</span></span>`;
        });

        // 5. Exponents: x^2 -> x<sup>2</sup>
        html = html.replace(/([A-Za-z0-9]+)\^([A-Za-z0-9]+)/g, "$1<sup class='sup'>$2</sup>");

        // 6. Normalize spacing
        html = html.replace(/\s+/g, " ").trim();

        block.innerHTML = html;
    });
});
</script>

</body>
</html>
